<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FixMyArea - Heatmap</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    body {
      margin:0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display:flex;
      background:#f4f6f8;
    }
    /* Top bar */
    .top-bar {
      position: fixed; top:0; left:0; width:100%; height:60px;
      background:#0a2342; color:#fff; display:flex; justify-content:space-between; align-items:center;
      padding:0 20px; box-shadow:0 2px 10px rgba(0,0,0,0.2); z-index:1000;
    }
    .top-bar .logo { height:40px; }
    .top-bar .top-right { display:flex; align-items:center; gap:15px; }
    .top-bar .profile img { width:32px; height:32px; border-radius:50%; margin-right:5px; }
    .sidebar { position: fixed; top:60px; left:0; width:220px; height:100%; background:#1e3f66; padding-top:20px; }
    .sidebar ul { list-style:none; padding:0; }
    .sidebar ul li { margin:10px 0; }
    .sidebar ul li a { display:block; padding:12px 20px; color:#fff; text-decoration:none; border-radius:6px; transition:0.3s; }
    .sidebar ul li a:hover { background:#0a2342; transform:translateX(5px); }
    .sidebar ul li a.active { background:#ff6b6b; }
    .main-content { margin-left:220px; padding:90px 30px 30px 30px; width:calc(100% - 220px); }
    .main-content h1 { color:#0a2342; margin-bottom:20px; }
    .filters { display:flex; gap:10px; margin-bottom:20px; flex-wrap:wrap; }
    .filters select { padding:8px 12px; border-radius:6px; border:1px solid #ccc; }
    .stats-cards { display:flex; gap:20px; flex-wrap:wrap; margin-bottom:20px; }
    .stats-cards .card { flex:1 1 200px; background:#fff; padding:20px; border-radius:12px; box-shadow:0 5px 15px rgba(0,0,0,0.1); text-align:center; transition:0.3s; }
    .stats-cards .card:hover { transform:translateY(-5px); box-shadow:0 10px 20px rgba(0,0,0,0.15); }
    .stats-cards .card h3 { color:#0a2342; margin-bottom:10px; }
    .stats-cards .card p { font-size:20px; font-weight:bold; color:#ff6b6b; }
    #map { width:100%; height:500px; border-radius:12px; box-shadow:0 5px 15px rgba(0,0,0,0.1); margin-bottom:10px; }
    .legend { display:flex; gap:20px; margin-top:10px; align-items:center; }
    .legend span { display:flex; align-items:center; gap:5px; font-weight:500; }
    .legend .color-box { width:20px; height:20px; border-radius:4px; }
    .privacy-note { margin-top:15px; font-style:italic; color:#555; }
  </style>
</head>
<body>
  <header class="top-bar">
    <img src="images/logo.svg" class="logo">
    <div class="top-right">
      <span class="notification">ðŸ””</span>
      <div class="profile"><img src="images/fake-profile.png" alt="profile"> Alex R**** â–¼</div>
    </div>
  </header>
  <aside class="sidebar">
    <ul>
      <li><a href="dashboard.html">Dashboard</a></li>
      <li><a href="file-complaint.html">File Complaint</a></li>
      <li><a href="track-complaint.html">Track Complaint</a></li>
      <li><a href="history.html">Complaint History</a></li>
      <li><a href="heatmap.html" class="active">Heatmap</a></li>
      <li><a href="file-complaint.html#sos">Emergency Report</a></li>
      <li><a href="e-result.html">E-Result</a></li>
      <li><a href="#">Settings</a></li>
    </ul>
  </aside>
  <main class="main-content">
    <h1>Complaint Heatmap</h1>
    <div class="filters">
      <select><option value="">All Categories</option><option>Traffic</option><option>Garbage</option></select>
      <select><option value="">All Priority</option><option>High</option><option>Medium</option><option>Low</option></select>
    </div>
    <div class="stats-cards">
      <div class="card"><h3>Total Complaints</h3><p>45</p></div>
      <div class="card"><h3>High Priority</h3><p>12</p></div>
      <div class="card"><h3>Medium Priority</h3><p>20</p></div>
      <div class="card"><h3>Low Priority</h3><p>13</p></div>
    </div>
    <div id="map"></div>
    <div class="legend">
      <span><div class="color-box" style="background:red"></div>High</span>
      <span><div class="color-box" style="background:yellow"></div>Medium</span>
      <span><div class="color-box" style="background:green"></div>Low</span>
    </div>
    <p class="privacy-note">Data is aggregated. No personal addresses are displayed. <a href="https://www.google.com/maps" target="_blank">Open in Google Maps</a></p>
  </main>

  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY"></script>
  <script>
    const map = new google.maps.Map(document.getElementById('map'), {
      center: {lat: 9.9312, lng: 76.2673}, zoom: 12
    });

    const complaints = [
      {lat:9.935, lng:76.265, priority:'high'},
      {lat:9.928, lng:76.275, priority:'medium'},
      {lat:9.940, lng:76.280, priority:'low'},
      {lat:9.925, lng:76.260, priority:'high'}
    ];

    complaints.forEach(c => {
      let color;
      if(c.priority==='high') color='red';
      else if(c.priority==='medium') color='yellow';
      else color='green';

      // Circle overlay
      new google.maps.Circle({
        strokeColor: color,
        strokeOpacity: 0.8,
        strokeWeight: 2,
        fillColor: color,
        fillOpacity: 0.3,
        map: map,
        center: {lat:c.lat, lng:c.lng},
        radius: 500
      });

      // Marker for info
      const marker = new google.maps.Marker({
        position: {lat:c.lat, lng:c.lng},
        map: map,
        title: `Priority: ${c.priority}`
      });

      const infoWindow = new google.maps.InfoWindow({content:`<b>Priority:</b> ${c.priority}`});
      marker.addListener('click', ()=>infoWindow.open(map, marker));
    });
  </script>
</body>
</html>